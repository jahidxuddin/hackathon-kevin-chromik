package weather

import (
	"io"
	"net/http"
	"strings"
)

func GetIpFromUser() (string, error) {
	res, err := http.Get("https://api.ipify.org?format=text")
	if err != nil {
		return "", err
	}
	defer res.Body.Close()

	body, err := io.ReadAll(res.Body)
	if err != nil {
		return "", err
	}

	return string(body), nil
}

func WeatherCodeToASCIIArt(weatherCode int) string {
	if art, ok := weatherCodeAsASCIIArt[weatherCode]; ok {
		var result strings.Builder
		for _, line := range art {
			result.WriteString(line + "\n")
		}
		return result.String()
	}
	return "No ASCII art available for this weather code"
}

var weatherCodeAsASCIIArt = map[int][6]string{
	0: {
		"\t     \\   /    ",
		"\t      .-.      ",
		"\t   - (   ) -   ",
		"\t      - ’      ",
		"\t     /   \\    ",
		"\t               ",
	},
	1: {
		"\t     \\   /    ",
		"\t      .-.      ",
		"\t   - (   ) -   ",
		"\t      - ’      ",
		"\t     /   \\    ",
		"\t               ",
	},
	2: {
		"\t    \\  /      ",
		"\t   _ /\"\".-.  ",
		"\t     \\_(   ). ",
		"\t     /(___(__) ",
		"\t               ",
		"\t               ",
	},
	3: {
		"\t               ",
		"\t       .--.    ",
		"\t    .-(    ).  ",
		"\t   (___.__)__) ",
		"\t               ",
		"\t               ",
	},
	45: {
		"\t               ",
		"\t   _ - _ - _ - ",
		"\t    _ - _ - _  ",
		"\t   _ - _ - _ - ",
		"\t               ",
		"\t               ",
	},
	48: {
		"\t               ",
		"\t   _ - _ - _ - ",
		"\t    _ - _ - _  ",
		"\t   _ - _ - _ - ",
		"\t               ",
		"\t               ",
	},
	51: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	53: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	55: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	56: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	57: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	61: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	63: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	65: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	66: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	67: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	71: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t     *  *  *   ",
		"\t    *  *  *    ",
		"\t               ",
	},
	73: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t     *  *  *   ",
		"\t    *  *  *    ",
		"\t               ",
	},
	75: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t     *  *  *   ",
		"\t    *  *  *    ",
		"\t               ",
	},
	77: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t     *  *  *   ",
		"\t    *  *  *    ",
		"\t               ",
	},
	80: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	81: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	82: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t               ",
	},
	85: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t     *  *  *   ",
		"\t    *  *  *    ",
		"\t               ",
	},
	86: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t     *  *  *   ",
		"\t    *  *  *    ",
		"\t               ",
	},
	95: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t     -‘-   ‘-  ",
	},
	96: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t     -‘-   ‘-  ",
	},
	99: {
		"\t       .-.     ",
		"\t      (   ).   ",
		"\t     (___(__)  ",
		"\t    ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\t     -‘-   ‘-  ",
	},
}
