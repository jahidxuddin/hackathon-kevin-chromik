package weather

import (
	"io"
	"net/http"
	"strings"
)

func GetIpFromUser() (string, error) {
	res, err := http.Get("https://api.ipify.org?format=text")
	if err != nil {
		return "", err
	}
	defer res.Body.Close()

	body, err := io.ReadAll(res.Body)
	if err != nil {
		return "", err
	}

	return string(body), nil
}

func WeatherCodeToASCIIArt(weatherCode int) string {
	if art, ok := weatherCodeAsASCIIArt[weatherCode]; ok {
		var result strings.Builder
		for _, line := range art {
			result.WriteString(line + "\n")
		}
		return result.String()
	}
	return "No ASCII art available for this weather code"
}

var weatherCodeAsASCIIArt = map[int][6]string {
	0: {
		"\033[33m     \\   /    ",
		"      .-.      				 ",
		"   - (   ) -   				 ",
		"      - ’      				 ",
		"     /   \\    				 ",
		"\033[97m              	 ",
	},
	1: {
		"\033[33m  	 \\   /    ",
		"      .-.     					",
		"   - (   ) -  					",
		"      - ’     				  ",
		"     /   \\   				  ",
		"\033[97m               ",
	},
	2: {
		"\033[33m    \\  /      ",
		"\033[33m   _ /\"\"\033[97m.-.  ",
		"\033[33m     \\_\033[97m(   ). ",
		"\033[33m     /\033[97m(___(__) ",
		"               ",
		"\033[97m                ",
	},
	3: {
		"\033[97m                ",
		"       .--.    				 ",
		"    .-(    ).  				 ",
		"   (___.__)__) 				 ",
		"               				 ",
		"\033[97m                ",
	},
	45: {
		"\033[37m          ",
		"   _ - _ - _ -",
		"    _ - _ - _ ",
		"   _ - _ - _ -",
		"              ",
		"\033[97m          ",
	},
	48: {
		"\033[37m                ",
		"   _ - _ - _ - 				 ",
		"    _ - _ - _  				 ",
		"   _ - _ - _ - 				 ",
		"               				 ",
		"\033[97m                ",
	},
	51: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	53: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	55: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	56: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	57: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	61: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	63: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	65: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	66: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	67: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"\t   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	71: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[36m      *  *  *   ",
		"    *  *  *    ",
		"\033[97m                ",
	},
	73: {
		"033[37m        .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[36m      *  *  *   ",
		"    *  *  *    ",
		"\033[97m                ",
	},
	75: {
		"033[37m        .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[36m      *  *  *   ",
		"    *  *  *    ",
		"\033[97m                ",
	},
	77: {
		"033[37m        .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[36m      *  *  *   ",
		"    *  *  *    ",
		"\033[97m                ",
	},
	80: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	81: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	82: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	85: {
		"033[37m        .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[36m      *  *  *   ",
		"   *  *  *    ",
		"\033[97m                ",
	},
	86: {
		"033[37m        .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[36m      *  *  *   ",
		"    *  *  *    ",
		"\033[97m                ",
	},
	95: {
		"\033[37m       .-.     ",
		"      (   ).   ",
		"     (___(__)  ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘   ",
		"\033[97m                ",
	},
	96: {
		"\033[37m       .-.     ",
		"      (   ).   				 ",
		"     (___(__)  				 ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘  					 ",
		"\033[97m                ",
	},
	99: {
		"\033[37m       .-.     ",
		"      (   ).   				 ",
		"     (___(__) 					 ",
		"\033[34m     ‘ ‘ ‘ ‘ ‘  ",
		"   ‘ ‘ ‘ ‘ ‘  					 ",
		"\033[97m                ",
	},
}
